--liquibase formatted sql

--changeset  sleepwalker:create_images_table
CREATE TABLE IF NOT EXISTS IMAGES
(
    ID      BIGINT UNIQUE PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    TITLE   VARCHAR(255)                                               NOT NULL,
    CONTENT BYTEA                                                      not null
);

CREATE TABLE IF NOT EXISTS PRODUCT_IMAGE
(
    PRODUCT_ID BIGINT NOT NULL,
    IMAGE_ID   BIGINT not null,
    CONSTRAINT FK_PRODUCT_IMAGE_IMAGE_ID FOREIGN KEY (IMAGE_ID) REFERENCES IMAGES,
    CONSTRAINT FK_PRODUCT_IMAGE_PRODUCTS_ID FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS,
    CONSTRAINT PK_CUSTOMERS_PRODUCTS PRIMARY KEY (IMAGE_ID, PRODUCT_ID)
)